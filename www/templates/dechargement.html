<ion-view title="Retour produit vers grossiste" cache-view="false">
  <div ng-app="starter">

    <ion-content padding="true" class="has-header">
      <ion-grid>
        <style type="text/css">
          input[readonly] {
            background-color: transparent !important;
            cursor: not-allowed;
          }

          .small_button {
            width: 50% !important;
            height: 50px !important;
            margin-left: 5px;
          }

          .footer-button {
            margin-bottom: 10px;
            height: 50px !important;
          }

          .ml {
            margin-left: 5px;
          }

          .header {

            margin-top: 5px;
            margin-bottom: 10px;
          }

          .content-div {
            background: grey !important;
          }

          .content-div-row {
            text-align: center !important;
            border: 3px grey dashed !important;
          }

          .edit {
            background: red !important;
          }

          .map {
            height: 200px !important;
          }

          .rendu {
            background: #1EAC4E !important;
            color: white;
          }
        </style>

          <div class="row">
            <div class="col">
              <button class="button button-block button-assertive" ng-change="getListArticleGrossiste()"
                cancel-button="{{ 'fichevisite_select_pv_return' | translate }}"
                reset-button="{{ 'fichevisite_select_pv_cancel' | translate }}"
                cancel-search-button="{{ 'fichevisite_select_pv_clear' | translate }}"
                search-placeholder="{{ 'fichevisite_select_pv_search' | translate }}" modal-select=""
                ng-model="data.grossistedestockchoisit" options="data.listgrossistedestock" option-getter="getOptGrossisteDestocke(option)"
                modal-button-left="{{ 'fichevisite_select_pv_return' | translate }}" modal-title="Selection"
                has-search="true">
                <label for="" ng-if="!data.grossistedestockchoisit">Grossiste</label>
                <label for="" ng-if="data.grossistedestockchoisit">{{data.grossistedestockchoisit.nom}}</label>
                <div class="option">
                  <h2> {{option.nom}}</h2>
                </div>
  
              </button>
            </div>

            <div class="col">

              <div class="list">
                <label class="item item-input" style="margin-top: 7px;">
                  <!-- <span class="input-label">numéro Fiche</span> -->
                  <input type="text" id="numFiche" ng-model="data.numFiche" placeholder="numéro Fiche...">
                </label>
              </div>
              
            </div>
          </div>



          <div >

            <!--<div class="row" style="margin-top: 10px;">

              <div class="col" style="font-size: 130%;">Details du PDS</div>

            </div>-->

            <div class="row" >

              <div class="col">
                <button class="button button-block button-assertive"
                  cancel-button="{{ 'fichevisite_select_pv_return' | translate }}"
                  reset-button="{{ 'fichevisite_select_pv_cancel' | translate }}"
                  cancel-search-button="{{ 'fichevisite_select_pv_clear' | translate }}"
                  search-placeholder="{{ 'fichevisite_select_pv_search' | translate }}" modal-select=""
                  ng-model="data.artcilechoisit" options="data.listarticles" option-getter="getOptArticle(option)"
         
                  modal-button-left="{{ 'fichevisite_select_pv_return' | translate }}" modal-title="Selection"
                  has-search="true">
                  Article
                  <div class="option">
                    <div class="row">

                      <div class="col">
                        <img src="http://test-test.h-tsoft.com/{{option.image}}" style="width:40%; height: 70%;">
                      </div>

                      <div class="col" style="font-size: 10px;">
                        <label
                          style="font-weight: bold;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Code
                          article :</label> {{option.code}}<br />
                        <label
                          style="font-weight: bold;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Libelle
                          article :</label> {{option.libelle}}<br />
                        <label
                          style="font-weight: bold;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Quantite
                          :</label> {{option.quantite}}<br />
                      </div>

                    </div>


                  </div>

                </button>

              </div>

              <!-- <div class="col" >
                <button class="button button-block button-assertive"
                  cancel-button="{{ 'fichevisite_select_pv_return' | translate }}"
                  reset-button="{{ 'fichevisite_select_pv_cancel' | translate }}"
                  cancel-search-button="{{ 'fichevisite_select_pv_clear' | translate }}"
                  search-placeholder="{{ 'fichevisite_select_pv_search' | translate }}" modal-select=""
                  ng-model="data.motifchoisit" options="data.listmotifs" option-getter="getOptMotif(option)"
                  modal-button-left="{{ 'fichevisite_select_pv_return' | translate }}" modal-title="Selection"
                  has-search="true">
                  Motif
                  <div class="option">
                    <h2> {{option.libelle}}</h2>
                  </div>
                </button>
              </div> -->
            </div>

            <div class="row">

              <div class="col">{{ data.artcilechoisit.libelle }}</div>

            </div>
            <div class="row">

              <div class="col">

            <div class="list">
              <label class="item item-input" style="margin-top: 7px;">
                <span class="input-label">Quantité</span>
                <input type="number" id="quantite" ng-model="data.quantite" placeholder="0">
              </label>
            </div>
            
          </div>

        </div>

            <div class="row">

              <div class="col">

                <div class="list" >
                  <label class="item item-input" style="margin-top: 7px;">
                    <span class="input-label">Prix</span>
                    <input type="number" ng-model="data.prix" placeholder="0">
                  </label>
                </div>


              </div>

            </div>

            <div class="row" ng-if="edit == false">
              <button ng-click="ajouter()" class="button button-block button-assertive footer-button" color="danger"
                type="submit" name="submit"><span style="color:white">Ajouter detail</span></button>
            </div>

           
          </div>


          <div class="row" style="margin-top: 10px;" ng-if="data.detailsPDS.length > 0">

            <div class="col" style="font-size: 130%;">Details PDS</div>

          </div>

          <div class="list">
            <div class="row header list">

              <div class="col" style="text-align: center;">Article</div>

              <div class="col" style="text-align: center;">Quantité</div>
              <div class="col" style="text-align: center;">Prix</div>
              <div class="col" style="text-align: center;">Montant</div>
              <div class="col" style="text-align: center;" ng-if="sens === 'nouvelle'">Editer</div>

            </div>

            <div class="row list" ng-repeat="d in data.detailsDechargement | filter:motcle">



              <div class="col content-div-row" ng-if="d.idMotif !== 'edit'"
                ng-click="showPopUp(d.article, 1, d.codeArticle)">
                {{d.codeArticle}}
              </div>

              <div class="col content-div-row edit" ng-if="d.idMotif === 'edit'"
                ng-click="showPopUp(d.article, 1, d.codeArticle)">
                {{d.codeArticle}}
              </div>

              <div class="col content-div-row" ng-if="d.idMotif !== 'edit'">
                <label style="margin-top: 10px;">
                  {{d.quantiteRendue }}
                </label>
              </div>

              <div class="col content-div-row edit" ng-if="d.idMotif === 'edit'">
                <label style="margin-top: 10px;">
                  {{ d.quantiteRendue }}
                </label>
              </div>


              <div class="col content-div-row" ng-if="d.idMotif !== 'edit'">
                <label style="margin-top: 10px;">
                  {{ number(d.prix) }}
                </label>
              </div>

              <div class="col content-div-row edit" ng-if="d.idMotif === 'edit'">
                <label style="margin-top: 10px;">
                  {{ number(d.prix) }}
                </label>
              </div>

              <div class="col content-div-row" ng-if="d.idMotif !== 'edit'">
                <label style="margin-top: 10px;">
                  {{ number(d.prix * d.quantiteRendue) }}
                </label>
              </div>

              <div class="col content-div-row edit" ng-if="d.idMotif === 'edit'">
                <label style="margin-top: 10px;">
                  {{ number(d.prix * d.quantiteRendue)}}
                </label>
              </div>

           
                <div class="col content-div-row" ng-if="d.idMotif !== 'edit' && sens === 'nouvelle'" ng-click="editDetail(d)">

                  <i class="icon ion-edit"></i>

                </div>

                <div class="col content-div-row edit" ng-if="d.idMotif === 'edit' && sens === 'nouvelle'" ng-click="editDetail(d)">

                  <i class="icon ion-edit"></i>

                </div>
          
               <div class="col content-div-row" ng-if="d.idMotif !== 'edit'" ng-click="deletObject(d)">
          
                  <i class="icon ion-trash-a" ></i>
          
              </div>
          
              <div class="col content-div-row edit" ng-if="d.idMotif === 'edit'" ng-click="deletObject(d)">
          
                      <i class="icon ion-trash-a"></i>
          
              </div>
             

            </div>


          </div>

        <br>
        <br>
        <br>


        <div class="col" ng-if="!data.verser">
          <button class="button button-clear button-assertive" style="color: white;">
            Valider
          </button>
        </div>


        <div ng-if="data.verser">
          <div class="list">
            <label class="item item-input">
              <span class="input-label">Code secret</span>
              <input type="text" id="code" ng-model="data.code">
            </label>
          </div>

          <div class="row">
            <div class="col">
              <button ng-click="validerVersment()" class="button button-block button-assertive footer-button"
                color="danger" type="submit" name="submit"><span style="color:white">Valider</span></button>
            </div>

            <div class="col">
              <button ng-click="annulerVersement()" class="button button-block button-assertive footer-button"
                color="danger" type="submit" name="submit"><span style="color:white">Annuler</span></button>
            </div>

          </div>
        </div>

      </ion-grid>
    </ion-content>
  </div>
  <div class="bar bar-footer footer-button" ng-if="!data.verser">
    <button ng-click="submit()" class="button button-block button-assertive footer-button" color="danger" type="submit"
      name="submit"><span style="color:white">Valider</span></button>
  </div>
</ion-view>